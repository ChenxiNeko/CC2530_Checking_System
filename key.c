/*********************************************************************************************
* 文件：key.c
* 作者：Meixin 2017.09.15
* 说明：按键驱动代码     
* 修改：liutong 20171027 修改了按键初始化函数名称、优化了注释、增加了按键状态获取函数
* 注释：
*********************************************************************************************/

/*********************************************************************************************
* 头文件
*********************************************************************************************/
#include "key.h"

/*********************************************************************************************
* 名称：key_init()
* 功能：按键初始化
* 参数：无
* 返回：无
* 修改：
* 注释：
*********************************************************************************************/
void key_init(void)
{
  P1SEL &= ~0x0C;                                               //配置按键检测管脚（p1.2, p1.3）为通用IO
  P1DIR &= ~0x0C;                                               //配置按键检测管脚（p1.2, p1.3）为通输出模式
}

/*********************************************************************************************
* 名称：key_status()
* 功能：获取按键的状态
* 参数：按键号，在key.h头文件中宏定义为KEY1，KEY2
* 返回：K1和K2的状态，0/DOWN表示按下，1/UP表示没按下，返回-1表示参数错误
* 修改：
* 注释：参数只能填入K1或者K2,否则会返回-1
*********************************************************************************************/
signed char key_status(char key)
{
 if(key == K1)                                                  //如果要获取K1的状态              
   return K1;
 
 if(key == K2)                                                  //如果要获取K2的状态
   return K2;
 
 return -1;                                                     //参数错误，返回-1
}